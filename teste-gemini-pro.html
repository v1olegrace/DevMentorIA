<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>DevMentor AI - Teste Gemini Pro</title>
    <style>
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            margin: 0;
            padding: 20px;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
        }
        
        .container {
            max-width: 800px;
            margin: 0 auto;
            background: white;
            border-radius: 12px;
            box-shadow: 0 20px 60px rgba(0,0,0,0.3);
            overflow: hidden;
        }
        
        .header {
            background: linear-gradient(135deg, #1976d2 0%, #1565c0 100%);
            color: white;
            padding: 30px;
            text-align: center;
        }
        
        .header h1 {
            margin: 0;
            font-size: 2.5em;
            font-weight: 300;
        }
        
        .content {
            padding: 30px;
        }
        
        .test-btn {
            width: 100%;
            padding: 20px;
            background: #1976d2;
            color: white;
            border: none;
            border-radius: 8px;
            font-size: 18px;
            font-weight: 500;
            cursor: pointer;
            margin: 10px 0;
            transition: all 0.3s ease;
        }
        
        .test-btn:hover {
            background: #1565c0;
            transform: translateY(-2px);
        }
        
        .test-btn:disabled {
            background: #ccc;
            cursor: not-allowed;
            transform: none;
        }
        
        .console-output {
            background: #1e1e1e;
            color: #d4d4d4;
            padding: 20px;
            border-radius: 8px;
            font-family: 'Consolas', 'Monaco', monospace;
            font-size: 14px;
            line-height: 1.5;
            max-height: 400px;
            overflow-y: auto;
            white-space: pre-wrap;
            margin-top: 20px;
        }
        
        .status {
            padding: 15px;
            border-radius: 8px;
            margin: 10px 0;
            font-weight: 500;
        }
        
        .status.success {
            background: #e8f5e8;
            color: #2e7d32;
            border: 1px solid #4caf50;
        }
        
        .status.error {
            background: #ffebee;
            color: #c62828;
            border: 1px solid #f44336;
        }
        
        .status.info {
            background: #e3f2fd;
            color: #1565c0;
            border: 1px solid #2196f3;
        }
        
        .loading {
            text-align: center;
            padding: 20px;
        }
        
        .spinner {
            border: 3px solid #f3f3f3;
            border-top: 3px solid #1976d2;
            border-radius: 50%;
            width: 30px;
            height: 30px;
            animation: spin 1s linear infinite;
            margin: 0 auto 10px;
        }
        
        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>ü§ñ DevMentor AI</h1>
            <p>Teste Gemini Pro Corrigido</p>
        </div>
        
        <div class="content">
            <div id="status-container">
                <div class="loading">
                    <div class="spinner"></div>
                    <p>Carregando sistema...</p>
                </div>
            </div>
            
            <button id="test-gemini-connection" class="test-btn" disabled>
                üîó Testar Conex√£o Gemini Pro
            </button>
            
            <button id="test-gemini-explanation" class="test-btn" disabled>
                üìñ Testar Explica√ß√£o Inteligente
            </button>
            
            <button id="test-gemini-video" class="test-btn" disabled>
                üé¨ Testar Roteiro de V√≠deo
            </button>
            
            <button id="test-gemini-quiz" class="test-btn" disabled>
                ‚úÖ Testar Quiz Personalizado
            </button>
            
            <div id="console-output" class="console-output">
                Aguardando testes...
            </div>
        </div>
    </div>

    <script>
        // Interceptar console.log para exibir na interface
        const originalLog = console.log;
        const originalError = console.error;
        const originalWarn = console.warn;
        
        const consoleOutput = document.getElementById('console-output');
        
        function addToConsole(message, type = 'log') {
            const timestamp = new Date().toLocaleTimeString();
            const prefix = type === 'error' ? '‚ùå' : type === 'warn' ? '‚ö†Ô∏è' : 'üìã';
            consoleOutput.textContent += `[${timestamp}] ${prefix} ${message}\n`;
            consoleOutput.scrollTop = consoleOutput.scrollHeight;
        }
        
        console.log = function(...args) {
            originalLog.apply(console, args);
            addToConsole(args.join(' '), 'log');
        };
        
        console.error = function(...args) {
            originalError.apply(console, args);
            addToConsole(args.join(' '), 'error');
        };
        
        console.warn = function(...args) {
            originalWarn.apply(console, args);
            addToConsole(args.join(' '), 'warn');
        };
        
        // Carregar scripts do DevMentor AI
        async function loadDevMentorScripts() {
            const scripts = [
                'utils/helpers.js',
                'utils/media-rich-engine.js',
                'utils/citation-engine.js',
                'utils/interactive-playground.js',
                'utils/visual-metaphor-engine.js',
                'utils/diagram-generator.js',
                'utils/ai-video-generator.js',
                'utils/quiz-generator.js',
                'utils/gemini-pro-integration.js',
                'utils/complete-media-rich-demo.js',
                'utils/devmentor-config.js',
                'utils/devmentor-examples.js',
                'utils/devmentor-index.js',
                'utils/devmentor-tests.js',
                'utils/gemini-config.js',
                'utils/gemini-tests.js',
                'utils/gemini-demo.js',
                'assets/styles/media-rich-styles.js'
            ];
            
            for (const script of scripts) {
                try {
                    await loadScript(script);
                } catch (error) {
                    console.warn(`Erro ao carregar ${script}:`, error.message);
                }
            }
        }
        
        function loadScript(src) {
            return new Promise((resolve, reject) => {
                const script = document.createElement('script');
                script.src = src;
                script.onload = resolve;
                script.onerror = reject;
                document.head.appendChild(script);
            });
        }
        
        // Atualizar status do sistema
        async function updateSystemStatus() {
            const statusContainer = document.getElementById('status-container');
            
            try {
                if (window.geminiProIntegration) {
                    const status = window.geminiProIntegration.getStatus();
                    
                    statusContainer.innerHTML = `
                        <div class="status ${status.isConfigured ? 'success' : 'error'}">
                            <strong>ü§ñ Gemini Pro ${status.isConfigured ? 'Configurado' : 'N√£o Configurado'}</strong>
                            <p>Modelo: ${status.model}</p>
                            <p>API Key: ${status.hasApiKey ? '‚úÖ Configurada' : '‚ùå N√£o configurada'}</p>
                        </div>
                    `;
                    
                    // Habilitar bot√µes
                    document.getElementById('test-gemini-connection').disabled = false;
                    document.getElementById('test-gemini-explanation').disabled = false;
                    document.getElementById('test-gemini-video').disabled = false;
                    document.getElementById('test-gemini-quiz').disabled = false;
                    
                } else {
                    statusContainer.innerHTML = `
                        <div class="status error">
                            <strong>‚ùå GeminiProIntegration n√£o dispon√≠vel</strong>
                            <p>Carregando scripts...</p>
                        </div>
                    `;
                }
            } catch (error) {
                statusContainer.innerHTML = `
                    <div class="status error">
                        <strong>‚ùå Erro ao verificar status</strong>
                        <p>${error.message}</p>
                    </div>
                `;
            }
        }
        
        // Event Listeners
        document.getElementById('test-gemini-connection').addEventListener('click', async () => {
            try {
                console.log('üîó Testando conex√£o com Gemini Pro...');
                const isConnected = await window.geminiProIntegration.testConnection();
                
                if (isConnected) {
                    console.log('‚úÖ Gemini Pro conectado com sucesso!');
                } else {
                    console.log('‚ùå Falha na conex√£o com Gemini Pro');
                }
            } catch (error) {
                console.error('‚ùå Erro ao testar conex√£o:', error.message);
            }
        });
        
        document.getElementById('test-gemini-explanation').addEventListener('click', async () => {
            try {
                console.log('üìñ Gerando explica√ß√£o inteligente...');
                const explanation = await window.geminiProIntegration.generateIntelligentExplanation(
                    'async function fetchData() { return await fetch("/api"); }',
                    'javascript',
                    'complexity',
                    'intermediate'
                );
                
                console.log('‚úÖ Explica√ß√£o gerada!');
                console.log('üìù Conceito Principal:', explanation.mainConcept || 'N/A');
                console.log('üîç An√°lise Detalhada:', explanation.detailedAnalysis ? 'Sim' : 'N√£o');
                console.log('üí° Melhorias:', explanation.improvements ? 'Sim' : 'N√£o');
                
            } catch (error) {
                console.error('‚ùå Erro ao gerar explica√ß√£o:', error.message);
            }
        });
        
        document.getElementById('test-gemini-video').addEventListener('click', async () => {
            try {
                console.log('üé¨ Gerando roteiro de v√≠deo...');
                const script = await window.geminiProIntegration.generateVideoScript(
                    'console.log("Hello World!");',
                    'javascript',
                    'optimization',
                    30
                );
                
                console.log('‚úÖ Roteiro gerado!');
                console.log('üé¨ Cenas:', script.scenes ? script.scenes.length : 0);
                
            } catch (error) {
                console.error('‚ùå Erro ao gerar roteiro:', error.message);
            }
        });
        
        document.getElementById('test-gemini-quiz').addEventListener('click', async () => {
            try {
                console.log('‚úÖ Gerando quiz personalizado...');
                const quizzes = await window.geminiProIntegration.generatePersonalizedQuizzes(
                    'function test() { return "hello"; }',
                    'javascript',
                    [{ name: 'functions', confidence: 0.9 }],
                    'beginner'
                );
                
                console.log('‚úÖ Quiz gerado!');
                console.log('üìù Perguntas:', quizzes.length);
                
            } catch (error) {
                console.error('‚ùå Erro ao gerar quiz:', error.message);
            }
        });
        
        // Inicializar
        async function init() {
            console.log('üöÄ Inicializando DevMentor AI com Gemini Pro...');
            
            try {
                await loadDevMentorScripts();
                console.log('‚úÖ Scripts carregados com sucesso!');
                
                // Aguardar um pouco para os scripts carregarem
                setTimeout(async () => {
                    await updateSystemStatus();
                    console.log('üìä Status do Gemini Pro atualizado');
                }, 1000);
                
            } catch (error) {
                console.error('‚ùå Erro ao carregar scripts:', error);
            }
        }
        
        // Inicializar quando a p√°gina carregar
        init();
    </script>
</body>
</html>







