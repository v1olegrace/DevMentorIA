<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>DevMentor AI - Demo Premium</title>
    <link rel="stylesheet" href="../assets/styles/main.css">
    <link rel="stylesheet" href="../assets/styles/premium-features.css">
    <style>
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            background: #f5f7fa;
            margin: 0;
            padding: 20px;
        }
        .demo-container {
            max-width: 1200px;
            margin: 0 auto;
        }
        .demo-header {
            text-align: center;
            margin-bottom: 40px;
        }
        .demo-code {
            background: #1e1e1e;
            color: #d4d4d4;
            padding: 20px;
            border-radius: 8px;
            font-family: 'Consolas', 'Monaco', monospace;
            margin-bottom: 30px;
            overflow-x: auto;
        }
        .demo-explanation {
            background: white;
            border-radius: 12px;
            padding: 0;
            box-shadow: 0 4px 20px rgba(0,0,0,0.1);
        }
        .plan-selector {
            display: flex;
            gap: 16px;
            margin-bottom: 30px;
            justify-content: center;
        }
        .plan-btn {
            padding: 12px 24px;
            border: 2px solid #e0e0e0;
            border-radius: 8px;
            background: white;
            cursor: pointer;
            transition: all 0.3s ease;
        }
        .plan-btn.active {
            border-color: #667eea;
            background: #667eea;
            color: white;
        }
        .plan-btn:hover {
            border-color: #667eea;
        }
    </style>
</head>
<body>
    <div class="demo-container">
        <div class="demo-header">
            <h1>ü§ñ DevMentor AI - Demo Premium</h1>
            <p>Veja como recursos de m√≠dia rica transformam explica√ß√µes simples em experi√™ncias educacionais completas</p>
        </div>

        <div class="plan-selector">
            <button class="plan-btn active" onclick="switchPlan('free')">
                üÜì Free Plan
            </button>
            <button class="plan-btn" onclick="switchPlan('pro')">
                üíº Pro Plan ($9.99/m√™s)
            </button>
            <button class="plan-btn" onclick="switchPlan('enterprise')">
                üè¢ Enterprise ($29.99/m√™s)
            </button>
        </div>

        <div class="demo-code">
            <div style="color: #569cd6;">// Exemplo: Algoritmo de ordena√ß√£o com otimiza√ß√£o</div>
            <div style="margin-top: 10px;">
<span style="color: #c586c0;">function</span> <span style="color: #dcdcaa;">quickSort</span>(<span style="color: #9cdcfe;">arr</span>) {
  <span style="color: #c586c0;">if</span> (<span style="color: #9cdcfe;">arr</span>.<span style="color: #dcdcaa;">length</span> <= <span style="color: #b5cea8;">1</span>) {
    <span style="color: #c586c0;">return</span> <span style="color: #9cdcfe;">arr</span>;
  }
  
  <span style="color: #c586c0;">const</span> <span style="color: #4fc1ff;">pivot</span> = <span style="color: #9cdcfe;">arr</span>[<span style="color: #dcdcaa;">Math</span>.<span style="color: #dcdcaa;">floor</span>(<span style="color: #9cdcfe;">arr</span>.<span style="color: #dcdcaa;">length</span> / <span style="color: #b5cea8;">2</span>)];
  <span style="color: #c586c0;">const</span> <span style="color: #4fc1ff;">left</span> = <span style="color: #9cdcfe;">arr</span>.<span style="color: #dcdcaa;">filter</span>(<span style="color: #9cdcfe;">x</span> => <span style="color: #9cdcfe;">x</span> < <span style="color: #4fc1ff;">pivot</span>);
  <span style="color: #c586c0;">const</span> <span style="color: #4fc1ff;">right</span> = <span style="color: #9cdcfe;">arr</span>.<span style="color: #dcdcaa;">filter</span>(<span style="color: #9cdcfe;">x</span> => <span style="color: #9cdcfe;">x</span> > <span style="color: #4fc1ff;">pivot</span>);
  
  <span style="color: #c586c0;">return</span> [
    ...<span style="color: #dcdcaa;">quickSort</span>(<span style="color: #4fc1ff;">left</span>),
    <span style="color: #4fc1ff;">pivot</span>,
    ...<span style="color: #dcdcaa;">quickSort</span>(<span style="color: #4fc1ff;">right</span>)
  ];
}
            </div>
        </div>

        <div id="explanation-container" class="demo-explanation">
            <!-- Explica√ß√£o ser√° inserida aqui dinamicamente -->
        </div>
    </div>

    <script src="../utils/helpers.js"></script>
    <script src="../utils/media-rich-explainer.js"></script>
    <script src="../content/premium-ui-manager.js"></script>
    
    <script>
        let currentPlan = 'free';
        let premiumUI = null;

        // Inicializar quando a p√°gina carregar
        document.addEventListener('DOMContentLoaded', async function() {
            premiumUI = new PremiumUIManager();
            premiumUI.currentPlan = currentPlan;
            await renderExplanation();
        });

        async function switchPlan(plan) {
            currentPlan = plan;
            
            // Atualizar bot√µes
            document.querySelectorAll('.plan-btn').forEach(btn => {
                btn.classList.remove('active');
            });
            event.target.classList.add('active');
            
            // Atualizar plano no UI manager
            if (premiumUI) {
                premiumUI.currentPlan = plan;
                await renderExplanation();
            }
        }

        async function renderExplanation() {
            const container = document.getElementById('explanation-container');
            container.innerHTML = ''; // Limpar conte√∫do anterior
            
            const code = `function quickSort(arr) {
  if (arr.length <= 1) {
    return arr;
  }
  
  const pivot = arr[Math.floor(arr.length / 2)];
  const left = arr.filter(x => x < pivot);
  const right = arr.filter(x => x > pivot);
  
  return [
    ...quickSort(left),
    pivot,
    ...quickSort(right)
  ];
}`;

            if (currentPlan === 'free') {
                await renderFreeExplanation(container, code);
            } else {
                await premiumUI.renderPremiumExplanation(code, 'QuickSort Algorithm', container);
            }
        }

        async function renderFreeExplanation(container, code) {
            container.innerHTML = `
                <div style="padding: 24px;">
                    <h3>üìù Explica√ß√£o B√°sica - Quick Sort</h3>
                    <p>Este √© um algoritmo de ordena√ß√£o que usa a estrat√©gia "dividir para conquistar":</p>
                    <ul>
                        <li><strong>Caso base:</strong> Arrays com 1 elemento ou vazios j√° est√£o ordenados</li>
                        <li><strong>Pivot:</strong> Escolhe um elemento como refer√™ncia (meio do array)</li>
                        <li><strong>Parti√ß√£o:</strong> Separa elementos menores e maiores que o pivot</li>
                        <li><strong>Recurs√£o:</strong> Aplica o mesmo processo nas sublistas</li>
                    </ul>
                    
                    <div style="background: #f8f9fa; padding: 16px; border-radius: 8px; margin: 16px 0;">
                        <h4>‚è∞ Complexidade:</h4>
                        <p><strong>Melhor caso:</strong> O(n log n)<br>
                        <strong>Pior caso:</strong> O(n¬≤)<br>
                        <strong>Caso m√©dio:</strong> O(n log n)</p>
                    </div>
                    
                    <div class="devmentor-upgrade-section" style="background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); color: white; padding: 20px; border-radius: 8px; text-align: center; margin-top: 20px;">
                        <h4>üöÄ Desbloqueie Recursos Premium</h4>
                        <p>Veja v√≠deos explicativos, diagramas interativos e cita√ß√µes acad√™micas!</p>
                        <ul style="text-align: left; max-width: 300px; margin: 16px auto;">
                            <li>üé¨ V√≠deos personalizados com anima√ß√µes</li>
                            <li>üìä Diagramas interativos naveg√°veis</li>
                            <li>üìö Cita√ß√µes acad√™micas confi√°veis</li>
                            <li>üìà M√©tricas de aprendizado</li>
                            <li>üë• Colabora√ß√£o em tempo real</li>
                        </ul>
                        <button onclick="switchPlan('pro')" style="background: linear-gradient(45deg, #ffd700, #ffed4e); color: #333; border: none; padding: 12px 24px; border-radius: 25px; font-weight: bold; cursor: pointer; margin-top: 12px;">
                            Upgrade para Pro - $9.99/m√™s
                        </button>
                    </div>
                </div>
            `;
        }

        // Garantir que MediaRichExplainer existe (mock para demo)
        if (typeof window.MediaRichExplainer === 'undefined') {
            window.MediaRichExplainer = class {
                async generateCitations(concept) {
                    return {
                        academicPapers: [
                            {
                                title: "Quicksort Algorithm: A Comprehensive Analysis",
                                authors: ["Dr. Sarah Johnson", "Prof. Michael Chen"],
                                journal: "IEEE Computer Science",
                                year: 2023,
                                relevanceScore: 0.95,
                                url: "https://example.com/paper1"
                            },
                            {
                                title: "Optimizing Divide-and-Conquer Algorithms",
                                authors: ["Dr. Emily Rodriguez"],
                                journal: "ACM Computing Surveys",
                                year: 2024,
                                relevanceScore: 0.88,
                                url: "https://example.com/paper2"
                            }
                        ],
                        documentationLinks: [
                            {
                                title: "Array.prototype.sort() - MDN",
                                source: "Mozilla Developer Network",
                                url: "https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array/sort",
                                lastUpdated: "2024-01-15"
                            }
                        ]
                    };
                }

                async generateInteractiveDiagram(code, type) {
                    return {
                        type: type,
                        nodes: [
                            { id: 'input', label: '[3,1,4,1,5]', type: 'data' },
                            { id: 'pivot', label: 'pivot: 4', type: 'process' },
                            { id: 'left', label: '[3,1,1]', type: 'data' },
                            { id: 'right', label: '[5]', type: 'data' },
                            { id: 'result', label: '[1,1,3,4,5]', type: 'result' }
                        ],
                        interactive: true
                    };
                }

                async generateExplanationVideo(code, concept) {
                    return {
                        script: `Vamos entender o algoritmo QuickSort passo a passo. 
                        Primeiro, verificamos se o array tem mais de um elemento. 
                        Se sim, escolhemos um pivot - neste caso, o elemento do meio.
                        Depois, separamos os elementos menores e maiores que o pivot.
                        Por fim, aplicamos recursivamente o mesmo processo.`,
                        duration: 180,
                        slides: [
                            { title: "Introdu√ß√£o ao QuickSort", timestamp: "0:00" },
                            { title: "Escolha do Pivot", timestamp: "0:30" },
                            { title: "Particionamento", timestamp: "1:00" },
                            { title: "Recurs√£o", timestamp: "1:30" }
                        ]
                    };
                }
            };
        }

        // Adicionar anima√ß√µes CSS se n√£o existirem
        if (!document.getElementById('premium-animations')) {
            const style = document.createElement('style');
            style.id = 'premium-animations';
            style.textContent = `
                .devmentor-fade-in {
                    animation: fadeIn 0.5s ease-in-out;
                }
                
                @keyframes fadeIn {
                    from { opacity: 0; transform: translateY(20px); }
                    to { opacity: 1; transform: translateY(0); }
                }
                
                .devmentor-slide-in {
                    animation: slideIn 0.6s ease-out;
                }
                
                @keyframes slideIn {
                    from { opacity: 0; transform: translateX(-30px); }
                    to { opacity: 1; transform: translateX(0); }
                }
            `;
            document.head.appendChild(style);
        }
    </script>
</body>
</html>
