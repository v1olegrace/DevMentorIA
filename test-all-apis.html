<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>DevMentor AI - Test All 7 Chrome Built-in AI APIs</title>
  <style>
    body {
      font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
      max-width: 1200px;
      margin: 0 auto;
      padding: 20px;
      background: #f5f5f5;
    }
    h1 {
      color: #1a73e8;
      text-align: center;
    }
    .api-section {
      background: white;
      border-radius: 8px;
      padding: 20px;
      margin: 20px 0;
      box-shadow: 0 2px 4px rgba(0,0,0,0.1);
    }
    .api-section h2 {
      color: #333;
      margin-top: 0;
      border-bottom: 2px solid #1a73e8;
      padding-bottom: 10px;
    }
    textarea {
      width: 100%;
      min-height: 100px;
      padding: 10px;
      border: 1px solid #ddd;
      border-radius: 4px;
      font-family: monospace;
      font-size: 14px;
      resize: vertical;
    }
    button {
      background: #1a73e8;
      color: white;
      border: none;
      padding: 10px 20px;
      border-radius: 4px;
      cursor: pointer;
      font-size: 14px;
      margin: 5px 5px 5px 0;
    }
    button:hover {
      background: #1557b0;
    }
    button:disabled {
      background: #ccc;
      cursor: not-allowed;
    }
    .output {
      background: #f8f9fa;
      border: 1px solid #e0e0e0;
      border-radius: 4px;
      padding: 15px;
      margin-top: 10px;
      white-space: pre-wrap;
      font-family: monospace;
      font-size: 12px;
      max-height: 400px;
      overflow-y: auto;
    }
    .output.success {
      border-left: 4px solid #34a853;
    }
    .output.error {
      border-left: 4px solid #ea4335;
      color: #d93025;
    }
    .status {
      display: inline-block;
      padding: 4px 8px;
      border-radius: 4px;
      font-size: 12px;
      font-weight: bold;
      margin-left: 10px;
    }
    .status.available {
      background: #e6f4ea;
      color: #1e8e3e;
    }
    .status.unavailable {
      background: #fce8e6;
      color: #d93025;
    }
    label {
      display: block;
      margin: 10px 0 5px 0;
      font-weight: 500;
      color: #555;
    }
    select, input {
      padding: 8px;
      border: 1px solid #ddd;
      border-radius: 4px;
      font-size: 14px;
      margin-right: 10px;
    }
    .capabilities {
      background: #e8f0fe;
      padding: 15px;
      border-radius: 4px;
      margin: 20px 0;
    }
    .capabilities h3 {
      margin-top: 0;
      color: #1a73e8;
    }
    .loading {
      color: #666;
      font-style: italic;
    }
  </style>
</head>
<body>
  <h1>üöÄ DevMentor AI - Test All 7 Chrome Built-in AI APIs</h1>

  <div class="capabilities" id="capabilities">
    <h3>Loading Capabilities...</h3>
  </div>

  <!-- 1. PROMPT API -->
  <div class="api-section">
    <h2>1. Prompt API (Code Analysis) <span class="status" id="status-prompt">Checking...</span></h2>
    <label for="code-input">Enter code to analyze:</label>
    <textarea id="code-input" placeholder="function hello() { console.log('Hello World'); }">function fibonacci(n) {
  if (n <= 1) return n;
  return fibonacci(n - 1) + fibonacci(n - 2);
}</textarea>
    <div>
      <button onclick="testPromptAPI('explain')">Explain</button>
      <button onclick="testPromptAPI('debug')">Debug</button>
      <button onclick="testPromptAPI('document')">Document</button>
      <button onclick="testPromptAPI('refactor')">Refactor</button>
      <button onclick="testPromptAPI('review')">Review</button>
    </div>
    <div class="output" id="output-prompt"></div>
  </div>

  <!-- 2. WRITER API -->
  <div class="api-section">
    <h2>2. Writer API <span class="status" id="status-writer">Checking...</span></h2>
    <label for="write-prompt">What should I write about?</label>
    <textarea id="write-prompt" placeholder="Write a function to validate email addresses">Write a function to validate email addresses</textarea>
    <div>
      <label for="write-tone">Tone:</label>
      <select id="write-tone">
        <option value="neutral">Neutral</option>
        <option value="formal">Formal</option>
        <option value="casual">Casual</option>
      </select>
      <label for="write-format">Format:</label>
      <select id="write-format">
        <option value="markdown">Markdown</option>
        <option value="plain-text">Plain Text</option>
      </select>
      <label for="write-length">Length:</label>
      <select id="write-length">
        <option value="medium">Medium</option>
        <option value="short">Short</option>
        <option value="long">Long</option>
      </select>
    </div>
    <button onclick="testWriterAPI()">Generate Content</button>
    <div class="output" id="output-writer"></div>
  </div>

  <!-- 3. REWRITER API -->
  <div class="api-section">
    <h2>3. Rewriter API <span class="status" id="status-rewriter">Checking...</span></h2>
    <label for="rewrite-text">Text to rewrite:</label>
    <textarea id="rewrite-text" placeholder="This code is bad">This code needs improvement because it has performance issues</textarea>
    <div>
      <label for="rewrite-tone">Tone:</label>
      <select id="rewrite-tone">
        <option value="as-is">As-Is</option>
        <option value="more-formal">More Formal</option>
        <option value="more-casual">More Casual</option>
      </select>
      <label for="rewrite-length">Length:</label>
      <select id="rewrite-length">
        <option value="as-is">As-Is</option>
        <option value="shorter">Shorter</option>
        <option value="longer">Longer</option>
      </select>
    </div>
    <button onclick="testRewriterAPI()">Rewrite Text</button>
    <div class="output" id="output-rewriter"></div>
  </div>

  <!-- 4. PROOFREADER API -->
  <div class="api-section">
    <h2>4. Proofreader API <span class="status" id="status-proofreader">Checking...</span></h2>
    <label for="proofread-text">Text to proofread:</label>
    <textarea id="proofread-text" placeholder="This sentence have an error">This sentence have an error and another mistakes here.</textarea>
    <label for="proofread-lang">Language:</label>
    <select id="proofread-lang">
      <option value="en">English</option>
      <option value="es">Spanish</option>
      <option value="fr">French</option>
      <option value="de">German</option>
    </select>
    <button onclick="testProofreaderAPI()">Check Grammar</button>
    <div class="output" id="output-proofreader"></div>
  </div>

  <!-- 5. TRANSLATOR API -->
  <div class="api-section">
    <h2>5. Translator API <span class="status" id="status-translator">Checking...</span></h2>
    <label for="translate-text">Text to translate:</label>
    <textarea id="translate-text" placeholder="Hello, world!">Hello, welcome to DevMentor AI!</textarea>
    <div>
      <label for="source-lang">From:</label>
      <select id="source-lang">
        <option value="en">English</option>
        <option value="es">Spanish</option>
        <option value="fr">French</option>
        <option value="de">German</option>
        <option value="pt">Portuguese</option>
      </select>
      <label for="target-lang">To:</label>
      <select id="target-lang">
        <option value="es">Spanish</option>
        <option value="en">English</option>
        <option value="fr">French</option>
        <option value="de">German</option>
        <option value="pt">Portuguese</option>
      </select>
    </div>
    <button onclick="testTranslatorAPI()">Translate</button>
    <div class="output" id="output-translator"></div>
  </div>

  <!-- 6. SUMMARIZER API -->
  <div class="api-section">
    <h2>6. Summarizer API <span class="status" id="status-summarizer">Checking...</span></h2>
    <label for="summarize-text">Text to summarize:</label>
    <textarea id="summarize-text" placeholder="Long article...">Chrome Built-in AI APIs are a set of experimental APIs that allow web developers to integrate powerful AI capabilities directly into their web applications and extensions. These APIs run entirely on-device, ensuring user privacy and enabling offline functionality. The APIs include language models for text generation, translation capabilities, summarization features, and more. They represent a significant step forward in bringing AI capabilities to the web platform while maintaining user privacy and security.</textarea>
    <div>
      <label for="summary-type">Type:</label>
      <select id="summary-type">
        <option value="key-points">Key Points</option>
        <option value="tldr">TL;DR</option>
        <option value="teaser">Teaser</option>
        <option value="headline">Headline</option>
      </select>
      <label for="summary-length">Length:</label>
      <select id="summary-length">
        <option value="medium">Medium</option>
        <option value="short">Short</option>
        <option value="long">Long</option>
      </select>
    </div>
    <button onclick="testSummarizerAPI()">Summarize</button>
    <div class="output" id="output-summarizer"></div>
  </div>

  <!-- 7. LANGUAGE DETECTOR API -->
  <div class="api-section">
    <h2>7. Language Detector API <span class="status" id="status-languageDetector">Checking...</span></h2>
    <label for="detect-text">Text to detect language:</label>
    <textarea id="detect-text" placeholder="Enter text...">Bonjour le monde</textarea>
    <button onclick="testLanguageDetectorAPI()">Detect Language</button>
    <div class="output" id="output-languageDetector"></div>
  </div>

  <script>
    // Check capabilities on load
    window.addEventListener('load', async () => {
      try {
        const response = await chrome.runtime.sendMessage({
          action: 'ai-get-capabilities'
        });

        if (response.success) {
          updateCapabilitiesDisplay(response);
          updateAPIStatuses(response.capabilities);
        } else {
          document.getElementById('capabilities').innerHTML = `
            <h3>‚ùå Error checking capabilities</h3>
            <p>${response.error}</p>
          `;
        }
      } catch (error) {
        document.getElementById('capabilities').innerHTML = `
          <h3>‚ùå Extension not loaded</h3>
          <p>Please load the DevMentor AI extension in Chrome to test the APIs.</p>
        `;
      }
    });

    function updateCapabilitiesDisplay(data) {
      const html = `
        <h3>üéØ AI Capabilities Status</h3>
        <p><strong>Available APIs:</strong> ${data.apiCount} / ${data.totalAPIs} (${data.percentageAvailable}%)</p>
        <p><strong>APIs:</strong> ${data.availableAPIs.join(', ')}</p>
      `;
      document.getElementById('capabilities').innerHTML = html;
    }

    function updateAPIStatuses(capabilities) {
      const apiMap = {
        'languageModel': 'prompt',
        'writer': 'writer',
        'rewriter': 'rewriter',
        'proofreader': 'proofreader',
        'translator': 'translator',
        'summarizer': 'summarizer',
        'languageDetector': 'languageDetector'
      };

      for (const [apiKey, statusId] of Object.entries(apiMap)) {
        const statusEl = document.getElementById(`status-${statusId}`);
        if (capabilities[apiKey]) {
          statusEl.textContent = 'Available';
          statusEl.className = 'status available';
        } else {
          statusEl.textContent = 'Unavailable';
          statusEl.className = 'status unavailable';
        }
      }
    }

    function showOutput(elementId, content, isError = false) {
      const outputEl = document.getElementById(elementId);
      outputEl.textContent = content;
      outputEl.className = `output ${isError ? 'error' : 'success'}`;
    }

    function showLoading(elementId) {
      const outputEl = document.getElementById(elementId);
      outputEl.textContent = '‚è≥ Processing...';
      outputEl.className = 'output loading';
    }

    // 1. PROMPT API TEST
    async function testPromptAPI(type) {
      const code = document.getElementById('code-input').value;
      showLoading('output-prompt');

      try {
        const response = await chrome.runtime.sendMessage({
          action: 'analyzeCode',
          payload: {
            code,
            analysisType: type,
            language: 'javascript',
            timestamp: Date.now()
          }
        });

        if (response.success) {
          const output = `‚úÖ Analysis Type: ${type}\n` +
                        `Source: ${response.metadata.source}\n` +
                        `Processing Time: ${response.metadata.processingTime}ms\n\n` +
                        `${response.result.analysis || response.result}`;
          showOutput('output-prompt', output);
        } else {
          showOutput('output-prompt', `‚ùå Error: ${response.error}`, true);
        }
      } catch (error) {
        showOutput('output-prompt', `‚ùå Error: ${error.message}`, true);
      }
    }

    // 2. WRITER API TEST
    async function testWriterAPI() {
      const prompt = document.getElementById('write-prompt').value;
      const tone = document.getElementById('write-tone').value;
      const format = document.getElementById('write-format').value;
      const length = document.getElementById('write-length').value;
      showLoading('output-writer');

      try {
        const response = await chrome.runtime.sendMessage({
          action: 'ai-write',
          prompt,
          tone,
          format,
          length
        });

        if (response.success) {
          const output = `‚úÖ Writer API Result\n` +
                        `Tone: ${tone}, Format: ${format}, Length: ${length}\n\n` +
                        `${response.result}`;
          showOutput('output-writer', output);
        } else {
          showOutput('output-writer', `‚ùå Error: ${response.error}`, true);
        }
      } catch (error) {
        showOutput('output-writer', `‚ùå Error: ${error.message}`, true);
      }
    }

    // 3. REWRITER API TEST
    async function testRewriterAPI() {
      const text = document.getElementById('rewrite-text').value;
      const tone = document.getElementById('rewrite-tone').value;
      const length = document.getElementById('rewrite-length').value;
      showLoading('output-rewriter');

      try {
        const response = await chrome.runtime.sendMessage({
          action: 'ai-rewrite',
          text,
          tone,
          length
        });

        if (response.success) {
          const output = `‚úÖ Rewriter API Result\n` +
                        `Original Length: ${response.metadata.originalLength}\n` +
                        `Tone: ${tone}, Length: ${length}\n\n` +
                        `${response.result}`;
          showOutput('output-rewriter', output);
        } else {
          showOutput('output-rewriter', `‚ùå Error: ${response.error}`, true);
        }
      } catch (error) {
        showOutput('output-rewriter', `‚ùå Error: ${error.message}`, true);
      }
    }

    // 4. PROOFREADER API TEST
    async function testProofreaderAPI() {
      const text = document.getElementById('proofread-text').value;
      const language = document.getElementById('proofread-lang').value;
      showLoading('output-proofreader');

      try {
        const response = await chrome.runtime.sendMessage({
          action: 'ai-proofread',
          text,
          language
        });

        if (response.success) {
          const output = `‚úÖ Proofreader API Result\n` +
                        `Language: ${language}\n` +
                        `Errors Found: ${response.metadata.errorCount}\n\n` +
                        `Original: ${text}\n\n` +
                        `Corrected: ${response.corrected}\n\n` +
                        `Corrections:\n${JSON.stringify(response.corrections, null, 2)}`;
          showOutput('output-proofreader', output);
        } else {
          showOutput('output-proofreader', `‚ùå Error: ${response.error}`, true);
        }
      } catch (error) {
        showOutput('output-proofreader', `‚ùå Error: ${error.message}`, true);
      }
    }

    // 5. TRANSLATOR API TEST
    async function testTranslatorAPI() {
      const text = document.getElementById('translate-text').value;
      const sourceLanguage = document.getElementById('source-lang').value;
      const targetLanguage = document.getElementById('target-lang').value;
      showLoading('output-translator');

      try {
        const response = await chrome.runtime.sendMessage({
          action: 'ai-translate',
          text,
          sourceLanguage,
          targetLanguage
        });

        if (response.success) {
          const output = `‚úÖ Translator API Result\n` +
                        `From ${sourceLanguage} to ${targetLanguage}\n\n` +
                        `Original: ${text}\n\n` +
                        `Translation: ${response.translation}`;
          showOutput('output-translator', output);
        } else {
          showOutput('output-translator', `‚ùå Error: ${response.error}`, true);
        }
      } catch (error) {
        showOutput('output-translator', `‚ùå Error: ${error.message}`, true);
      }
    }

    // 6. SUMMARIZER API TEST
    async function testSummarizerAPI() {
      const text = document.getElementById('summarize-text').value;
      const type = document.getElementById('summary-type').value;
      const length = document.getElementById('summary-length').value;
      showLoading('output-summarizer');

      try {
        const response = await chrome.runtime.sendMessage({
          action: 'ai-summarize',
          text,
          type,
          format: 'markdown',
          length
        });

        if (response.success) {
          const output = `‚úÖ Summarizer API Result\n` +
                        `Type: ${type}, Length: ${length}\n` +
                        `Original: ${response.metadata.originalLength} chars\n` +
                        `Summary: ${response.metadata.summaryLength} chars\n\n` +
                        `${response.summary}`;
          showOutput('output-summarizer', output);
        } else {
          showOutput('output-summarizer', `‚ùå Error: ${response.error}`, true);
        }
      } catch (error) {
        showOutput('output-summarizer', `‚ùå Error: ${error.message}`, true);
      }
    }

    // 7. LANGUAGE DETECTOR API TEST
    async function testLanguageDetectorAPI() {
      const text = document.getElementById('detect-text').value;
      showLoading('output-languageDetector');

      try {
        const response = await chrome.runtime.sendMessage({
          action: 'ai-detect-language',
          text
        });

        if (response.success) {
          const resultsStr = response.results
            .map(r => `${r.detectedLanguage}: ${(r.confidence * 100).toFixed(2)}%`)
            .join('\n');

          const output = `‚úÖ Language Detector API Result\n` +
                        `Primary Language: ${response.primaryLanguage}\n` +
                        `Confidence: ${(response.confidence * 100).toFixed(2)}%\n\n` +
                        `All Results:\n${resultsStr}`;
          showOutput('output-languageDetector', output);
        } else {
          showOutput('output-languageDetector', `‚ùå Error: ${response.error}`, true);
        }
      } catch (error) {
        showOutput('output-languageDetector', `‚ùå Error: ${error.message}`, true);
      }
    }
  </script>
</body>
</html>
