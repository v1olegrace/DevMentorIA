<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>DevMentor AI - Teste do Sistema</title>
    <style>
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            margin: 0;
            padding: 20px;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
        }
        
        .container {
            max-width: 1200px;
            margin: 0 auto;
            background: white;
            border-radius: 12px;
            box-shadow: 0 20px 60px rgba(0,0,0,0.3);
            overflow: hidden;
        }
        
        .header {
            background: linear-gradient(135deg, #1976d2 0%, #1565c0 100%);
            color: white;
            padding: 30px;
            text-align: center;
        }
        
        .header h1 {
            margin: 0;
            font-size: 2.5em;
            font-weight: 300;
        }
        
        .header p {
            margin: 10px 0 0 0;
            opacity: 0.9;
            font-size: 1.1em;
        }
        
        .content {
            padding: 30px;
        }
        
        .test-section {
            margin-bottom: 30px;
            padding: 20px;
            background: #f8f9fa;
            border-radius: 8px;
            border-left: 4px solid #1976d2;
        }
        
        .test-section h3 {
            margin: 0 0 15px 0;
            color: #1976d2;
            font-size: 1.3em;
        }
        
        .test-buttons {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 15px;
            margin-bottom: 20px;
        }
        
        .test-btn {
            padding: 15px 20px;
            background: #1976d2;
            color: white;
            border: none;
            border-radius: 6px;
            font-size: 16px;
            font-weight: 500;
            cursor: pointer;
            transition: all 0.3s ease;
            display: flex;
            align-items: center;
            gap: 10px;
        }
        
        .test-btn:hover {
            background: #1565c0;
            transform: translateY(-2px);
            box-shadow: 0 4px 12px rgba(25, 118, 210, 0.3);
        }
        
        .test-btn:active {
            transform: translateY(0);
        }
        
        .test-btn:disabled {
            background: #ccc;
            cursor: not-allowed;
            transform: none;
            box-shadow: none;
        }
        
        .console-output {
            background: #1e1e1e;
            color: #d4d4d4;
            padding: 20px;
            border-radius: 6px;
            font-family: 'Consolas', 'Monaco', monospace;
            font-size: 14px;
            line-height: 1.5;
            max-height: 400px;
            overflow-y: auto;
            white-space: pre-wrap;
            margin-top: 20px;
        }
        
        .status-indicator {
            display: inline-block;
            width: 12px;
            height: 12px;
            border-radius: 50%;
            margin-right: 8px;
        }
        
        .status-success { background: #4caf50; }
        .status-error { background: #f44336; }
        .status-warning { background: #ff9800; }
        .status-info { background: #2196f3; }
        
        .component-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 15px;
            margin-top: 20px;
        }
        
        .component-card {
            padding: 15px;
            background: white;
            border-radius: 6px;
            border: 1px solid #e0e0e0;
            text-align: center;
        }
        
        .component-card h4 {
            margin: 0 0 10px 0;
            color: #1976d2;
            font-size: 1.1em;
        }
        
        .component-card .status {
            font-size: 12px;
            padding: 4px 8px;
            border-radius: 12px;
            font-weight: 500;
        }
        
        .status-active {
            background: #e8f5e8;
            color: #2e7d32;
        }
        
        .status-inactive {
            background: #ffebee;
            color: #c62828;
        }
        
        .loading {
            display: none;
            text-align: center;
            padding: 20px;
        }
        
        .spinner {
            border: 3px solid #f3f3f3;
            border-top: 3px solid #1976d2;
            border-radius: 50%;
            width: 30px;
            height: 30px;
            animation: spin 1s linear infinite;
            margin: 0 auto 10px;
        }
        
        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }
        
        .gemini-config {
            background: #fff3e0;
            border: 1px solid #ffb74d;
            border-radius: 6px;
            padding: 15px;
            margin: 20px 0;
        }
        
        .gemini-config h4 {
            margin: 0 0 10px 0;
            color: #e65100;
        }
        
        .gemini-input {
            width: 100%;
            padding: 10px;
            border: 1px solid #ddd;
            border-radius: 4px;
            font-family: monospace;
            margin-bottom: 10px;
        }
        
        .gemini-btn {
            background: #ff9800;
            color: white;
            border: none;
            padding: 10px 20px;
            border-radius: 4px;
            cursor: pointer;
            font-weight: 500;
        }
        
        .gemini-btn:hover {
            background: #f57c00;
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>🎬 DevMentor AI</h1>
            <p>Sistema de Explicações Ricas em Mídia - Teste Completo</p>
        </div>
        
        <div class="content">
            <!-- Status do Sistema -->
            <div class="test-section">
                <h3>📊 Status do Sistema</h3>
                <div id="system-status">
                    <div class="loading">
                        <div class="spinner"></div>
                        <p>Carregando sistema...</p>
                    </div>
                </div>
                <div id="component-status" class="component-grid" style="display: none;"></div>
            </div>
            
            <!-- Configuração Gemini Pro -->
            <div class="test-section">
                <h3>🤖 Configuração Gemini Pro</h3>
                <div class="gemini-config">
                    <h4>🤖 Google Gemini Pro - Configurado Automaticamente</h4>
                    <p style="color: #4caf50; font-weight: 500;">✅ API Key configurada automaticamente!</p>
                    <p style="color: #666; font-size: 14px;">Sua API key do Gemini Pro foi configurada e está pronta para uso.</p>
                    <button id="test-gemini-connection" class="gemini-btn">Testar Conexão Gemini Pro</button>
                    <div id="gemini-status"></div>
                </div>
            </div>
            
            <!-- Testes Principais -->
            <div class="test-section">
                <h3>🧪 Testes Principais</h3>
                <div class="test-buttons">
                    <button id="test-complete" class="test-btn">
                        <span>🧪</span>
                        <span>Teste Completo</span>
                    </button>
                    <button id="test-quick" class="test-btn">
                        <span>⚡</span>
                        <span>Teste Rápido</span>
                    </button>
                    <button id="test-performance" class="test-btn">
                        <span>⚡</span>
                        <span>Teste de Performance</span>
                    </button>
                    <button id="test-explanation" class="test-btn">
                        <span>📖</span>
                        <span>Testar Explicação</span>
                    </button>
                </div>
            </div>
            
            <!-- Testes Gemini Pro -->
            <div class="test-section">
                <h3>🤖 Testes Gemini Pro</h3>
                <div class="test-buttons">
                    <button id="test-gemini-complete" class="test-btn">
                        <span>🤖</span>
                        <span>Teste Gemini Completo</span>
                    </button>
                    <button id="test-gemini-quick" class="test-btn">
                        <span>⚡</span>
                        <span>Teste Gemini Rápido</span>
                    </button>
                    <button id="test-integration" class="test-btn">
                        <span>🎬</span>
                        <span>Integração Completa</span>
                    </button>
                </div>
            </div>
            
            <!-- Testes de Componentes -->
            <div class="test-section">
                <h3>🧩 Testes de Componentes</h3>
                <div class="test-buttons">
                    <button id="test-citation" class="test-btn">
                        <span>📚</span>
                        <span>CitationEngine</span>
                    </button>
                    <button id="test-metaphor" class="test-btn">
                        <span>🎨</span>
                        <span>VisualMetaphorEngine</span>
                    </button>
                    <button id="test-diagram" class="test-btn">
                        <span>📊</span>
                        <span>DiagramGenerator</span>
                    </button>
                    <button id="test-quiz" class="test-btn">
                        <span>✅</span>
                        <span>QuizGenerator</span>
                    </button>
                    <button id="test-playground" class="test-btn">
                        <span>🎮</span>
                        <span>InteractivePlayground</span>
                    </button>
                    <button id="test-video" class="test-btn">
                        <span>🎬</span>
                        <span>AIVideoGenerator</span>
                    </button>
                </div>
            </div>
            
            <!-- Demo -->
            <div class="test-section">
                <h3>🎬 Demonstrações</h3>
                <div class="test-buttons">
                    <button id="demo-quick" class="test-btn">
                        <span>⚡</span>
                        <span>Demo Rápida</span>
                    </button>
                    <button id="demo-complete" class="test-btn">
                        <span>🎬</span>
                        <span>Demo Completa</span>
                    </button>
                    <button id="demo-interactive" class="test-btn">
                        <span>🎮</span>
                        <span>Demo Interativa</span>
                    </button>
                </div>
            </div>
            
            <!-- Console Output -->
            <div class="test-section">
                <h3>📋 Console Output</h3>
                <div id="console-output" class="console-output">
                    Aguardando testes...
                </div>
            </div>
        </div>
    </div>

    <script>
        // Interceptar console.log para exibir na interface
        const originalLog = console.log;
        const originalError = console.error;
        const originalWarn = console.warn;
        
        const consoleOutput = document.getElementById('console-output');
        
        function addToConsole(message, type = 'log') {
            const timestamp = new Date().toLocaleTimeString();
            const prefix = type === 'error' ? '❌' : type === 'warn' ? '⚠️' : '📋';
            consoleOutput.textContent += `[${timestamp}] ${prefix} ${message}\n`;
            consoleOutput.scrollTop = consoleOutput.scrollHeight;
        }
        
        console.log = function(...args) {
            originalLog.apply(console, args);
            addToConsole(args.join(' '), 'log');
        };
        
        console.error = function(...args) {
            originalError.apply(console, args);
            addToConsole(args.join(' '), 'error');
        };
        
        console.warn = function(...args) {
            originalWarn.apply(console, args);
            addToConsole(args.join(' '), 'warn');
        };
        
        // Carregar scripts do DevMentor AI
        async function loadDevMentorScripts() {
            const scripts = [
                'utils/helpers.js',
                'utils/media-rich-engine.js',
                'utils/citation-engine.js',
                'utils/interactive-playground.js',
                'utils/visual-metaphor-engine.js',
                'utils/diagram-generator.js',
                'utils/ai-video-generator.js',
                'utils/quiz-generator.js',
                'utils/gemini-pro-integration.js',
                'utils/complete-media-rich-demo.js',
                'utils/devmentor-config.js',
                'utils/devmentor-examples.js',
                'utils/devmentor-index.js',
                'utils/devmentor-tests.js',
                'utils/gemini-config.js',
                'utils/gemini-tests.js',
                'utils/gemini-demo.js',
                'assets/styles/media-rich-styles.js'
            ];
            
            for (const script of scripts) {
                try {
                    await loadScript(script);
                } catch (error) {
                    console.warn(`Erro ao carregar ${script}:`, error.message);
                }
            }
        }
        
        function loadScript(src) {
            return new Promise((resolve, reject) => {
                const script = document.createElement('script');
                script.src = src;
                script.onload = resolve;
                script.onerror = reject;
                document.head.appendChild(script);
            });
        }
        
        // Atualizar status do sistema
        async function updateSystemStatus() {
            const statusDiv = document.getElementById('system-status');
            const componentDiv = document.getElementById('component-status');
            
            try {
                if (window.DevMentorHelpers) {
                    const status = window.DevMentorHelpers.getMediaRichSystemStatus();
                    
                    statusDiv.innerHTML = `
                        <div style="text-align: center; padding: 20px;">
                            <div class="status-indicator ${status.allComponentsLoaded ? 'status-success' : 'status-warning'}"></div>
                            <strong>Sistema ${status.allComponentsLoaded ? 'Completo' : 'Parcial'}</strong>
                            <p>Componentes ativos: ${Object.values(status).filter(Boolean).length - 2}/${Object.keys(status).length - 2}</p>
                        </div>
                    `;
                    
                    const components = [
                        { name: 'MediaRichEngine', status: status.mediaRichEngine },
                        { name: 'CitationEngine', status: status.citationEngine },
                        { name: 'InteractivePlayground', status: status.interactivePlayground },
                        { name: 'VisualMetaphorEngine', status: status.visualMetaphorEngine },
                        { name: 'DiagramGenerator', status: status.diagramGenerator },
                        { name: 'AIVideoGenerator', status: status.aiVideoGenerator },
                        { name: 'QuizGenerator', status: status.quizGenerator },
                        { name: 'GeminiProIntegration', status: status.geminiProIntegration },
                        { name: 'CompleteMediaRichDemo', status: status.completeMediaRichDemo },
                        { name: 'DevMentorIndex', status: status.devMentorIndex },
                        { name: 'Estilos CSS', status: status.stylesLoaded }
                    ];
                    
                    componentDiv.innerHTML = components.map(comp => `
                        <div class="component-card">
                            <h4>${comp.name}</h4>
                            <div class="status ${comp.status ? 'status-active' : 'status-inactive'}">
                                ${comp.status ? 'Ativo' : 'Inativo'}
                            </div>
                        </div>
                    `).join('');
                    
                    componentDiv.style.display = 'grid';
                } else {
                    statusDiv.innerHTML = `
                        <div style="text-align: center; padding: 20px;">
                            <div class="status-indicator status-error"></div>
                            <strong>Sistema não carregado</strong>
                            <p>Carregando scripts...</p>
                        </div>
                    `;
                }
            } catch (error) {
                statusDiv.innerHTML = `
                    <div style="text-align: center; padding: 20px;">
                        <div class="status-indicator status-error"></div>
                        <strong>Erro ao verificar status</strong>
                        <p>${error.message}</p>
                    </div>
                `;
            }
        }
        
        
        // Event Listeners
        document.getElementById('test-complete').addEventListener('click', async () => {
            if (window.DevMentorTests) {
                await window.DevMentorTests.testarSistemaCompleto();
            } else {
                console.error('DevMentorTests não disponível');
            }
        });
        
        document.getElementById('test-quick').addEventListener('click', async () => {
            if (window.DevMentorTests) {
                await window.DevMentorTests.testeRapido();
            } else {
                console.error('DevMentorTests não disponível');
            }
        });
        
        document.getElementById('test-performance').addEventListener('click', async () => {
            if (window.DevMentorTests) {
                await window.DevMentorTests.testarPerformance();
            } else {
                console.error('DevMentorTests não disponível');
            }
        });
        
        document.getElementById('test-explanation').addEventListener('click', async () => {
            try {
                const explanation = await window.DevMentorHelpers.generateRichExplanation(
                    'async function test() { return await fetch("/api"); }',
                    'complexity',
                    'javascript',
                    'intermediate'
                );
                console.log('Explicação gerada:', explanation.length, 'caracteres');
            } catch (error) {
                console.error('Erro ao gerar explicação:', error);
            }
        });
        
        // Testes Gemini Pro
        document.getElementById('test-gemini-complete').addEventListener('click', async () => {
            if (window.DevMentorGeminiTests) {
                await window.DevMentorGeminiTests.testarGeminiProCompleto();
            } else {
                console.error('DevMentorGeminiTests não disponível');
            }
        });
        
        document.getElementById('test-gemini-quick').addEventListener('click', async () => {
            if (window.DevMentorGeminiTests) {
                await window.DevMentorGeminiTests.testeRapidoGeminiPro();
            } else {
                console.error('DevMentorGeminiTests não disponível');
            }
        });
        
        document.getElementById('test-integration').addEventListener('click', async () => {
            if (window.DevMentorGeminiTests) {
                await window.DevMentorGeminiTests.testarIntegracaoCompleta();
            } else {
                console.error('DevMentorGeminiTests não disponível');
            }
        });
        
        document.getElementById('test-citation').addEventListener('click', async () => {
            if (window.DevMentorTests) {
                await window.DevMentorTests.testarComponenteEspecifico('citation');
            }
        });
        
        document.getElementById('test-metaphor').addEventListener('click', async () => {
            if (window.DevMentorTests) {
                await window.DevMentorTests.testarComponenteEspecifico('metaphor');
            }
        });
        
        document.getElementById('test-diagram').addEventListener('click', async () => {
            if (window.DevMentorTests) {
                await window.DevMentorTests.testarComponenteEspecifico('diagram');
            }
        });
        
        document.getElementById('test-quiz').addEventListener('click', async () => {
            if (window.DevMentorTests) {
                await window.DevMentorTests.testarComponenteEspecifico('quiz');
            }
        });
        
        document.getElementById('test-playground').addEventListener('click', async () => {
            if (window.DevMentorTests) {
                await window.DevMentorTests.testarComponenteEspecifico('playground');
            }
        });
        
        document.getElementById('test-video').addEventListener('click', async () => {
            try {
                if (window.aiVideoGenerator) {
                    const video = await window.aiVideoGenerator.generateExplanationVideo(
                        'console.log("Hello World!");',
                        'Este código imprime uma mensagem',
                        { language: 'javascript' }
                    );
                    console.log('Vídeo gerado:', video.duration, 'segundos');
                } else {
                    console.error('AIVideoGenerator não disponível');
                }
            } catch (error) {
                console.error('Erro ao gerar vídeo:', error);
            }
        });
        
        document.getElementById('demo-quick').addEventListener('click', async () => {
            if (window.completeMediaRichDemo) {
                await window.completeMediaRichDemo.runQuickDemo();
            } else {
                console.error('CompleteMediaRichDemo não disponível');
            }
        });
        
        document.getElementById('demo-complete').addEventListener('click', async () => {
            if (window.completeMediaRichDemo) {
                await window.completeMediaRichDemo.runCompleteDemo();
            } else {
                console.error('CompleteMediaRichDemo não disponível');
            }
        });
        
        document.getElementById('demo-interactive').addEventListener('click', async () => {
            if (window.completeMediaRichDemo) {
                await window.completeMediaRichDemo.runInteractiveDemo();
            } else {
                console.error('CompleteMediaRichDemo não disponível');
            }
        });
        
        document.getElementById('test-gemini-connection').addEventListener('click', async () => {
            const statusDiv = document.getElementById('gemini-status');
            statusDiv.innerHTML = '<p style="color: #2196f3;">🔄 Testando conexão...</p>';
            
            try {
                if (window.geminiProIntegration) {
                    const isConnected = await window.geminiProIntegration.testConnection();
                    
                    if (isConnected) {
                        statusDiv.innerHTML = '<p style="color: #4caf50;">✅ Gemini Pro conectado e funcionando!</p>';
                    } else {
                        statusDiv.innerHTML = '<p style="color: #f44336;">❌ Erro na conexão com Gemini Pro</p>';
                    }
                } else {
                    statusDiv.innerHTML = '<p style="color: #f44336;">❌ GeminiProIntegration não disponível</p>';
                }
            } catch (error) {
                statusDiv.innerHTML = `<p style="color: #f44336;">❌ Erro: ${error.message}</p>`;
            }
        });
        
        // Inicializar
        async function init() {
            console.log('🚀 Inicializando DevMentor AI Test Interface...');
            
            try {
                await loadDevMentorScripts();
                console.log('✅ Scripts carregados com sucesso!');
                
                // Aguardar um pouco para os scripts carregarem
                setTimeout(async () => {
                    await updateSystemStatus();
                    console.log('📊 Status do sistema atualizado');
                }, 1000);
                
            } catch (error) {
                console.error('❌ Erro ao carregar scripts:', error);
            }
        }
        
        // Inicializar quando a página carregar
        init();
    </script>
</body>
</html>
